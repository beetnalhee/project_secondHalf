<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ezen.springmvc.domain.review.mapper.ReviewMapper">

    <!-- 신규 리뷰 생성 쿼리 -->
    <insert id="createReview" parameterType="ReviewDto" useGeneratedKeys="true" keyProperty="reviewId">
        <!-- 리뷰 테이블에 새로운 리뷰를 추가합니다. -->
        <selectKey keyProperty="reviewId" resultType="long" order="BEFORE">
            SELECT review_id_seq.NEXTVAL FROM dual
        </selectKey>
        INSERT INTO review (review_id, member_id, review, place_id, regdate)
        VALUES (#{reviewId}, #{memberId}, #{review}, #{placeId}, current_timestamp)
    </insert>


</mapper>